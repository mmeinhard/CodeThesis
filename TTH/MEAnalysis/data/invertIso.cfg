[general]
do_stat_variations: False
do_fake_data: True
category_templates: template_sl template_dl

#definition of all process lists
process_lists:
  base_processes
#  ttjets_powheg_exclusive
  ttjets_powheg
#  ttjets_powheg_isr_up
#  ttjets_powheg_isr_down
#  ttjets_powheg_fsr_up
#  ttjets_powheg_fsr_down
  sl_data
#  dl_data
#  fh_data

#Process lists that are actually included in analysis
processes:
  base_processes
#  ttjets_powheg_exclusive
  ttjets_powheg
#  ttjets_powheg_isr_up
#  ttjets_powheg_isr_down
#  ttjets_powheg_fsr_up
#  ttjets_powheg_fsr_down
  sl_data
#  dl_data
#  fh_data

#Which groups of categories to run limits for
analysis_groups:
  group_sl
#  group_dl
#  group_sldl
#  group_sl_2tag
#  group_dl_2tag
  group_sldl_2tag
#commented out right now because it crashes the limits
#  group_fh
name: SLDL
debug: false
mem_python_config: $CMSSW_BASE/src/TTH/MEAnalysis/python/cfg_invertIso.py

#calculated using calcLumis.py
[lumi]
SingleMuon: 34558.61
SingleElectron: 35235.084
MuonEG: 36384.493
DoubleEG: 35867.060
DoubleMuon: 35867.060
BTagCSV: 0
JetHT: 36000.0
Common: 36000.0

[blr_cuts]
sl_j4_t2: 20
sl_j4_t3: 1.1
sl_j4_tge4: -20
sl_j5_t2: 20
sl_j5_t3: 2.3
sl_j5_tge4: -20
sl_jge6_t2: -0.4
sl_jge6_t3: 2.9
sl_jge6_tge4: -20
dl_j3_t2: 20
dl_j3_t3: -20
dl_jge4_t2: 20
dl_jge4_t3: 2.3
dl_jge4_tge4: -20
fh_j9_t4: -20
fh_j8_t3: -20
fh_j8_t4: -20
fh_j7_t4: -20
fh_j7_t3: -20
fh_jge6_t4: -20
fh_jge6_t3: -20

[sparsinator]
do_classifier_db: false
calculate_bdt: false
add_systematics: true
recompute_btag_weights: false

###
### Systematics
###
[systematics]

#systematics that change the event topology
event:
  CMS_scale_j
  CMS_res_j
  CMS_scaleSubTotalPileUp_j
  CMS_scaleAbsoluteStat_j
  CMS_scaleAbsoluteScale_j
  CMS_scaleAbsoluteFlavMap_j
  CMS_scaleAbsoluteMPFBias_j
  CMS_scaleFragmentation_j
  CMS_scaleSinglePionECAL_j
  CMS_scaleSinglePionHCAL_j
  CMS_scaleFlavorQCD_j
  CMS_scaleTimePtEta_j
  CMS_scaleRelativeJEREC1_j
  CMS_scaleRelativeJEREC2_j
  CMS_scaleRelativeJERHF_j
  CMS_scaleRelativePtBB_j
  CMS_scaleRelativePtEC1_j
  CMS_scaleRelativePtEC2_j
  CMS_scaleRelativePtHF_j
  CMS_scaleRelativeFSR_j
  CMS_scaleRelativeStatFSR_j
  CMS_scaleRelativeStatEC_j
  CMS_scaleRelativeStatHF_j
  CMS_scalePileUpDataMC_j
  CMS_scalePileUpPtRef_j
  CMS_scalePileUpPtBB_j
  CMS_scalePileUpPtEC1_j
  CMS_scalePileUpPtEC2_j
  CMS_scalePileUpPtHF_j
weight:
  CMS_ttH_CSVcferr1
  CMS_ttH_CSVcferr2
  CMS_ttH_CSVhf
  CMS_ttH_CSVhfstats1
  CMS_ttH_CSVhfstats2
  CMS_ttH_CSVjes
  CMS_ttH_CSVlf
  CMS_ttH_CSVlfstats1
  CMS_ttH_CSVlfstats2
  CMS_pu
sample:
#  CMS_ttjetsisr
#  CMS_ttjetsfsr

#individual systematics
[nominal]

[CMS_scale_jUp]
#suffix is used to get the systematically variated value from the MEM tree (numJets -> numJets_TotalUp)
suffix: TotalUp

[CMS_scale_jDown]
suffix: TotalDown

[CMS_res_jUp]
suffix: JERUp

[CMS_res_jDown]
suffix: JERDown
#the other event-based systematics are automatically derived, as the name is the same as the the scenario defined in sparsinator

[CMS_ttjetsisr]
process_list_up: ttjets_powheg_isr_up
process_list_down: ttjets_powheg_isr_down

[CMS_ttjetsfsr]
process_list_up: ttjets_powheg_fsr_up
process_list_down: ttjets_powheg_fsr_down

###
### Samples
###
#These are all the MINIAOD-level generated samples along with their normalization
#info, schema (if they are data or not)
[samples]
samples_list:
  ttHTobb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
  TT_TuneCUETP8M2T4_13TeV-powheg-pythia8
#  ttHToNonbb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
#  TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
#  TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
#  QCD_HT1000to1500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#  TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8
#  TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8
#  TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8
#  TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8
#  TTWJetsToLNu_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8
#  TTWJetsToQQ_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8
#  TTZToLLNuNu_M-10_TuneCUETP8M1_13TeV-amcatnlo-pythia8
#  TTZToQQ_TuneCUETP8M1_13TeV-amcatnlo-pythia8
#  ST_tW_antitop_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4
#  ST_tW_top_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4
#  ST_t-channel_antitop_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin
#  ST_t-channel_top_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin
#  ST_s-channel_4f_leptonDecays_13TeV-amcatnlo-pythia8_TuneCUETP8M1
#  WW_TuneCUETP8M1_13TeV-pythia8
#  WZ_TuneCUETP8M1_13TeV-pythia8
#  ZZ_TuneCUETP8M1_13TeV-pythia8
  DoubleMuon
  DoubleEG
  MuonEG
  SingleMuon
  SingleElectron
#  JetHT

#Here we define the samples, which correspond to a simulated or measured sample in DAS
[ttHTobb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Aug3_syst/ttHTobb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Aug3_syst/ttHTobb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8.txt
step_size_sparsinator: 1
debug_max_files: 10
ngen: 3687873
classifier_db_path:
schema: mc
skim_file:
#https://twiki.cern.ch/twiki/bin/view/LHCPhysics/CERNYellowReportPageAt1314TeV#s_13_0_TeV
#0.5085 * 0.577
xsec: 0.2934045
vhbb_tree_name: vhbb/tree
test_events: 1000 

[ttHToNonbb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8]
files_load: /pnfs/psi.ch/cms/trivcat/store/user/jpata/tth/GC31d7c7f9a4c3/ttHToNonbb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar27_2tag_v2/ttHToNonbb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8.txt
step_size_sparsinator: 1
debug_max_files: 50
ngen: 3469818
schema: mc
classifier_db_path:
process: ttH_nonhbb
skim_file:
#0.5085 * (1.0 - 0.577)
xsec: 0.2150955
vhbb_tree_name: vhbb/tree
test_events: 1000 

[TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8]
files_load: /pnfs/psi.ch/cms/trivcat/store/user/jpata/tth/GC31d7c7f9a4c3/TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar27_2tag_v2/TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8.txt
step_size_sparsinator: 1
debug_max_files: 100
ngen: 144545776
schema: mc
classifier_db_path:
process: ttbarUnsplit
skim_file:
#http://pdg.lbl.gov/2013/reviews/rpp2013-rev-top-quark.pdf page 3, A-C
#831.76*2*0.6741*(1.0 - 0.6741)
xsec: 365.45736135
vhbb_tree_name: vhbb/tree
test_events: 1000 

[TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8]
files_load: /pnfs/psi.ch/cms/trivcat/store/user/jpata/tth/GC31d7c7f9a4c3/TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar27_2tag_v2/TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8.txt
step_size_sparsinator: 1
debug_max_files: 100
ngen: 70799120
schema: mc
classifier_db_path:
process: ttbarUnsplit
skim_file:
#http://pdg.lbl.gov/2013/reviews/rpp2013-rev-top-quark.pdf page 3, A-C
#831.76*(1.0 - 0.6741)**2
xsec: 88.341903326
vhbb_tree_name: vhbb/tree
test_events: 5000 

#[DYJetsToLL_M-10to50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/DYJetsToLL_M-10to50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 30915886
#schema: mc
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__DYJetsToLL_M-10to50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8.root
#process: dy_10_50
#skim_file:
#xsec: 22635.09
#
#[DYJetsToLL_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/DYJetsToLL_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: -1
#schema: mc
#classifier_db_path:
#process: dy_50_inf
#skim_file:
#xsec: 6025.2
#
#[TTJets_SingleLeptFromT_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/TTJets_SingleLeptFromT_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 5
#debug_max_files: 500
#ngen: 9423575
#schema: mc
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__TTJets_SingleLeptFromT_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#process: ttbarUnsplit
#skim_file:
##http://pdg.lbl.gov/2013/reviews/rpp2013-rev-top-quark.pdf page 3, A-C
##831.76*0.438
#xsec: 364.31088
#

[TT_TuneCUETP8M2T4_13TeV-powheg-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Jun30/TT_TuneCUETP8M2T4_13TeV-powheg-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Jun30/TT_TuneCUETP8M2T4_13TeV-powheg-pythia8.txt
step_size_sparsinator: 20
debug_max_files: 10
ngen: 75499181
classifier_db_path:
schema: mc
skim_file:
xsec: 831.76
vhbb_tree_name: vhbb/tree
test_events: 1000 

#FIXME check nGen when jobs complete. Add other QCD samples
[QCD_HT1000to1500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/JoosepFeb_nosyst_v1/QCD_HT1000to1500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8_dsalerno-JoosepFeb_nosyst_v1-ad34c5d555175199a164e56760d04270.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/JoosepFeb_nosyst_v1/QCD_HT1000to1500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8_dsalerno-JoosepFeb_nosyst_v1-ad34c5d555175199a164e56760d04270.txt
step_size_sparsinator: 20
debug_max_files: 10
ngen: 15127293
classifier_db_path:
schema: mc
process: qcd
skim_file:
xsec: 1206
vhbb_tree_name: vhbb/tree
test_events: 2000

#
#[TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8.txt
#step_size_sparsinator: 5
#debug_max_files: 500
#ngen: 15345536
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8.root
#schema: mc
#process: ttbarUnsplit
#skim_file:
#xsec: 364.31088
#
[WW_TuneCUETP8M1_13TeV-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/WW_TuneCUETP8M1_13TeV-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/WW_TuneCUETP8M1_13TeV-pythia8.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 993214
classifier_db_path:
schema: mc
process: ww
skim_file:
xsec: 118.7
vhbb_tree_name: vhbb/tree
test_events: 5000 

[WZ_TuneCUETP8M1_13TeV-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/WZ_TuneCUETP8M1_13TeV-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/WZ_TuneCUETP8M1_13TeV-pythia8.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 1000000
classifier_db_path:
schema: mc
process: wz
skim_file:
xsec: 47.13
vhbb_tree_name: vhbb/tree
test_events: 5000 

[ZZ_TuneCUETP8M1_13TeV-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ZZ_TuneCUETP8M1_13TeV-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ZZ_TuneCUETP8M1_13TeV-pythia8.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 989312
classifier_db_path:
schema: mc
process: zz
skim_file:
xsec: 16.523
vhbb_tree_name: vhbb/tree
test_events: 5000 

[ST_t-channel_top_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_t-channel_top_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_t-channel_top_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 3279200
classifier_db_path:
schema: mc
process: st_t
skim_file:
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/SingleTopSigma?rev=12
xsec: 136.02
vhbb_tree_name: vhbb/tree
test_events: 5000 

[ST_t-channel_antitop_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_t-channel_antitop_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_t-channel_antitop_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 1682400
classifier_db_path:
schema: mc
process: stbar_t
skim_file:
#https://twiki.cern.ch/twiki/bin/viewauth/CMS/SingleTopSigma?rev=12
xsec: 80.95
vhbb_tree_name: vhbb/tree
test_events: 5000 

[ST_s-channel_4f_leptonDecays_13TeV-amcatnlo-pythia8_TuneCUETP8M1]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_s-channel_4f_leptonDecays_13TeV-amcatnlo-pythia8_TuneCUETP8M1.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_s-channel_4f_leptonDecays_13TeV-amcatnlo-pythia8_TuneCUETP8M1.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 1000000
classifier_db_path:
schema: mc
process: st_s
skim_file:
#https://twiki.cern.ch/twiki/bin/view/LHCPhysics/SingleTopRefXsec
xsec: 3.44
vhbb_tree_name: vhbb/tree
test_events: 5000 

[ST_tW_top_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_tW_top_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_tW_top_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 998400
classifier_db_path:
schema: mc
process: st_tw
skim_file:
#(NNLO, https://twiki.cern.ch/twiki/bin/viewauth/CMS/SummaryTable1G25ns#Single_top)
xsec: 35.85
vhbb_tree_name: vhbb/tree
test_events: 5000 

[ST_tW_antitop_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_tW_antitop_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/ST_tW_antitop_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4.txt
step_size_sparsinator: 20
debug_max_files: 50
ngen: 985000
classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__ST_tW_antitop_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M1.root
schema: mc
process: st_tw
skim_file:
#(NNLO, https://twiki.cern.ch/twiki/bin/viewauth/CMS/SummaryTable1G25ns#Single_top)
xsec: 35.85
vhbb_tree_name: vhbb/tree
test_events: 5000 

[TTWJetsToQQ_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTWJetsToQQ_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTWJetsToQQ_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 833298
classifier_db_path:
schema: mc
process: ttw_wqq
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
xsec: 0.4062
vhbb_tree_name: vhbb/tree
test_events: 5000 

[TTWJetsToLNu_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTWJetsToLNu_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTWJetsToLNu_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 252673
classifier_db_path:
schema: mc
process: ttw_wlnu
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
xsec: 0.2043
vhbb_tree_name: vhbb/tree
test_events: 5000 

[TTZToQQ_TuneCUETP8M1_13TeV-amcatnlo-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTZToQQ_TuneCUETP8M1_13TeV-amcatnlo-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTZToQQ_TuneCUETP8M1_13TeV-amcatnlo-pythia8.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 749400
classifier_db_path:
schema: mc
process: ttz_zqq
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
xsec: 0.5297
vhbb_tree_name: vhbb/tree
test_events: 5000 

[TTZToLLNuNu_M-10_TuneCUETP8M1_13TeV-amcatnlo-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTZToLLNuNu_M-10_TuneCUETP8M1_13TeV-amcatnlo-pythia8.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar24_leptonic_minorsamp/TTZToLLNuNu_M-10_TuneCUETP8M1_13TeV-amcatnlo-pythia8.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 749400
classifier_db_path:
schema: mc
process: ttz_zllnunu
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
#TODO check reference, currently from https://gitlab.cern.ch/ttH/reference/blob/master/definitions/Moriond17.md#13-datasets
xsec: 0.2529
vhbb_tree_name: vhbb/tree
test_events: 5000 


[TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 29596240
classifier_db_path:
schema: mc
process: ttbarUnsplit
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
#TODO check reference, currently from https://gitlab.cern.ch/ttH/reference/blob/master/definitions/Moriond17.md#13-datasets
xsec: 831.76
vhbb_tree_name: vhbb/tree
test_events: 5000 

[TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 58954485
classifier_db_path:
schema: mc
process: ttbarUnsplit
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
#TODO check reference, currently from https://gitlab.cern.ch/ttH/reference/blob/master/definitions/Moriond17.md#13-datasets
xsec: 831.76
vhbb_tree_name: vhbb/tree
test_events: 5000 

[TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 58812876
classifier_db_path:
schema: mc
process: ttbarUnsplit
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
#TODO check reference, currently from https://gitlab.cern.ch/ttH/reference/blob/master/definitions/Moriond17.md#13-datasets
xsec: 831.76
vhbb_tree_name: vhbb/tree
test_events: 5000 

[TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar17_v1/TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8_jpata-Mar17_v1-88ed42a9c9b604ee5fa28380206f5ec9.txt
step_size_sparsinator: 10
debug_max_files: 50
ngen: 52190637
classifier_db_path:
schema: mc
process: ttbarUnsplit
skim_file:
#http://arxiv.org/pdf/1507.05640v1.pdf
#TODO check reference, currently from https://gitlab.cern.ch/ttH/reference/blob/master/definitions/Moriond17.md#13-datasets
xsec: 831.76
vhbb_tree_name: vhbb/tree
test_events: 5000 

##https://twiki.cern.ch/twiki/bin/viewauth/CMS/TTbarHbbRun2ReferenceAnalysis2016
#[WJetsToLNu_HT-100To200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/WJetsToLNu_HT-100To200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 27527195
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__WJetsToLNu_HT-100To200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#schema: mc
#process: wjets_ht_100_200
#skim_file:
#xsec: 1345.0
#
#[WJetsToLNu_HT-200To400_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/WJetsToLNu_HT-200To400_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 4963240
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__WJetsToLNu_HT-200To400_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#schema: mc
#process: wjets_ht_200_400
#skim_file:
#xsec: 359.7
#
#[WJetsToLNu_HT-400To600_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/WJetsToLNu_HT-400To600_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 1963464
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__WJetsToLNu_HT-400To600_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#schema: mc
#process: wjets_ht_400_600
#skim_file:
#xsec: 48.91
#
#[WJetsToLNu_HT-600To800_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/WJetsToLNu_HT-600To800_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 3722395
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__WJetsToLNu_HT-600To800_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#schema: mc
#process: wjets_ht_600_800
#skim_file:
#xsec: 12.05
#
#[WJetsToLNu_HT-800To1200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/WJetsToLNu_HT-800To1200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 6314257
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__WJetsToLNu_HT-800To1200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#schema: mc
#process: wjets_ht_800_1200
#skim_file:
#xsec: 5.501
#
#[WJetsToLNu_HT-1200To2500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/WJetsToLNu_HT-1200To2500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 246737
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__WJetsToLNu_HT-1200To2500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#schema: mc
#process: wjets_ht_1200_2500
#skim_file:
#xsec: 1.329
#
#[WJetsToLNu_HT-2500ToInf_TuneCUETP8M1_13TeV-madgraphMLM-pythia8]
#files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Sep29_v1/WJetsToLNu_HT-2500ToInf_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.txt
#step_size_sparsinator: 10
#debug_max_files: 50
#ngen: 253561
#classifier_db_path: /mnt/t3nfs01/data01/shome/jpata/tth/ClassifierDB/Oct9/#Sep29_v1__WJetsToLNu_HT-2500ToInf_TuneCUETP8M1_13TeV-madgraphMLM-pythia8.root
#schema: mc
#process: wjets_ht_2500_inf
#skim_file:
#xsec: 0.03216
#
[SingleMuon]
files_load: /pnfs/psi.ch/cms/trivcat/store/user/jpata/tth/GC3bfbff95533b/SingleMuon/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar29_rereco_v1/SingleMuon.txt
step_size_sparsinator: 1
debug_max_files: 500
ngen: -1
schema: data
classifier_db_path:
process: data_m
skim_file:
xsec: 1.0
vhbb_tree_name: tree
test_events: 50000

[SingleElectron]
files_load: /pnfs/psi.ch/cms/trivcat/store/user/jpata/tth/GC3bfbff95533b/SingleElectron/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar29_rereco_v1/SingleElectron.txt
step_size_sparsinator: 1
debug_max_files: 500
ngen: -1
schema: data
classifier_db_path:
process: data_m
skim_file:
xsec: 1.0
vhbb_tree_name: tree
test_events: 50000

[DoubleMuon]
files_load: /mnt/t3nfs01/data01/shome/jpata/tth/gc/meanalysis/GC31d7c7f9a4c3/DoubleMuon/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/V25/DoubleMuon.txt
step_size_sparsinator: 50
debug_max_files: 500
ngen: -1
schema: data
classifier_db_path:
process: data_mm
skim_file:
xsec: 1.0
vhbb_tree_name: tree
test_events: 50000

[DoubleEG]
files_load: /mnt/t3nfs01/data01/shome/jpata/tth/gc/meanalysis/GC31d7c7f9a4c3/DoubleEG/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/V25/DoubleEG.txt
step_size_sparsinator: 50
debug_max_files: 500
ngen: -1
schema: data
classifier_db_path:
process: data_mm
skim_file:
xsec: 1.0
vhbb_tree_name: tree
test_events: 50000 

[MuonEG]
files_load: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar15_v1/MuonEG.txt
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/Mar15_v1/MuonEG.txt
step_size_sparsinator: 50
debug_max_files: 500
ngen: -1
schema: data
classifier_db_path:
process: data_em
skim_file:
xsec: 1.0
vhbb_tree_name: vhbb/tree
test_events: 50000

#DS FIXME put proper files names
[JetHT]
files_load: /mnt/t3nfs01/data01/shome/jpata/tth/gc/meanalysis/GC31d7c7f9a4c3/DoubleEG/*
files_load_step1: $CMSSW_BASE/src/TTH/MEAnalysis/gc/datasets/JoosepFeb_nosyst_v1/JetHT_dsalerno-JoosepFeb_nosyst_v1-a91b745a2333df3c1dcf2cedb60be78c.txt
step_size_sparsinator: 50
debug_max_files: 500
ngen: -1
schema: data
classifier_db_path:
process: data_fh
skim_file:
xsec: 1.0
vhbb_tree_name: tree
test_events: 50000

###
### Cuts
###

[cuts]
cuts_list:
  triggerPath_m
  triggerPath_e
  triggerPath_mm
  triggerPath_em
  triggerPath_ee
  triggerPath_fh
  process_ttbarPlusBBbar
  process_ttbarPlus2B
  process_ttbarPlusB
  process_ttbarPlusCCbar
  process_ttbarOther

[triggerPath_m]
sparsinator:
  triggerPath 1 2
skim: (is_sl==1 && HLT_ttH_SL_mu==1 && abs(leps_pdgId[0])==13)

[triggerPath_e]
sparsinator:
  triggerPath 2 3
skim: (is_sl==1 && HLT_ttH_SL_el==1 && abs(leps_pdgId[0])==11)

[triggerPath_mm]
sparsinator:
  triggerPath 3 4
skim: (is_dl==1 && HLT_ttH_DL_mumu==1 && abs(leps_pdgId[0])==13 && abs(leps_pdgId[1])==13)

[triggerPath_em]
sparsinator:
  triggerPath 4 5
skim: (is_dl==1 && HLT_ttH_DL_elmu==1 && ((abs(leps_pdgId[0])==13 && abs(leps_pdgId[1])==11) || (abs(leps_pdgId[0])==11 && abs(leps_pdgId[1])==13)))

[triggerPath_ee]
sparsinator:
  triggerPath 5 6
skim: (is_dl==1 && HLT_ttH_DL_elel==1 && abs(leps_pdgId[0])==11 && abs(leps_pdgId[1])==11)

[triggerPath_fh]
sparsinator:
  triggerPath 6 7
skim: (is_fh==1 && HLT_ttH_FH==1)

[process_ttbarPlusBBbar]
sparsinator:
  ttCls 53 60
skim: (ttCls >= 53)

[process_ttbarPlus2B]
sparsinator:
  ttCls 52 53
skim: (ttCls == 52)

[process_ttbarPlusB]
sparsinator:
  ttCls 51 52
skim: (ttCls == 51)

[process_ttbarPlusCCbar]
sparsinator:
  ttCls 41 46
skim: (ttCls >= 41 && ttCls <= 45)

[process_ttbarOther]
sparsinator:
  ttCls 0 1
skim: (ttCls == 0)

###
### Process lists
###
# Each process list consists of a number of processes

#common for all kinds of analyses
[base_processes]
split_by_trigger_path: true
schema: mc
processes:
  ttH_hbb
#  ttH_nonhbb
#  ww
#  wz
#  zz
#  st_t
#  stbar_t
#  st_s
#  st_tw
#  stbar_tw
#  ttw_wqq
#  ttw_wlnu
#  ttz_zqq
#  ttz_zllnunu
#  wjets_ht_100_200
#  wjets_ht_200_400
#  wjets_ht_400_600
#  wjets_ht_600_800
#  wjets_ht_800_1200
#  wjets_ht_1200_2500
#  wjets_ht_2500_inf
#  dy_10_50

# POWHEG-based tt+jets
[ttjets_powheg_exclusive]
split_by_trigger_path: true
schema: mc
processes:
  ttjets_sl_powheg_ttbarOther
  ttjets_sl_powheg_ttbarPlusBBbar
  ttjets_sl_powheg_ttbarPlus2B
  ttjets_sl_powheg_ttbarPlusB
  ttjets_sl_powheg_ttbarPlusCCbar
  ttjets_dl_powheg_ttbarOther
  ttjets_dl_powheg_ttbarPlusBBbar
  ttjets_dl_powheg_ttbarPlus2B
  ttjets_dl_powheg_ttbarPlusB
  ttjets_dl_powheg_ttbarPlusCCbar

[ttjets_powheg]
split_by_trigger_path: true
schema: mc
processes:
  ttjets_powheg_ttbarOther
  ttjets_powheg_ttbarPlusBBbar 
  ttjets_powheg_ttbarPlus2B
  ttjets_powheg_ttbarPlusB
  ttjets_powheg_ttbarPlusCCbar

[ttjets_powheg_isr_up]
split_by_trigger_path: true
schema: mc
processes:
  ttjets_powheg_isr_up_ttbarOther
  ttjets_powheg_isr_up_ttbarPlusBBbar 
  ttjets_powheg_isr_up_ttbarPlus2B
  ttjets_powheg_isr_up_ttbarPlusB
  ttjets_powheg_isr_up_ttbarPlusCCbar

[ttjets_powheg_isr_down]
split_by_trigger_path: true
schema: mc
processes:
  ttjets_powheg_isr_down_ttbarOther
  ttjets_powheg_isr_down_ttbarPlusBBbar 
  ttjets_powheg_isr_down_ttbarPlus2B
  ttjets_powheg_isr_down_ttbarPlusB
  ttjets_powheg_isr_down_ttbarPlusCCbar

[ttjets_powheg_fsr_up]
split_by_trigger_path: true
schema: mc
processes:
  ttjets_powheg_fsr_up_ttbarOther
  ttjets_powheg_fsr_up_ttbarPlusBBbar 
  ttjets_powheg_fsr_up_ttbarPlus2B
  ttjets_powheg_fsr_up_ttbarPlusB
  ttjets_powheg_fsr_up_ttbarPlusCCbar

[ttjets_powheg_fsr_down]
split_by_trigger_path: true
schema: mc
processes:
  ttjets_powheg_fsr_down_ttbarOther
  ttjets_powheg_fsr_down_ttbarPlusBBbar 
  ttjets_powheg_fsr_down_ttbarPlus2B
  ttjets_powheg_fsr_down_ttbarPlusB
  ttjets_powheg_fsr_down_ttbarPlusCCbar

# Single-leptonic data
[sl_data]
split_by_trigger_path: true
schema: data
processes:
  data_m
  data_e

[dl_data]
split_by_trigger_path: true
schema: data
processes:
  data_mm
  data_em
  data_ee

[fh_data]
split_by_trigger_path: false
schema: data
processes:
  data_fh

###############
### Processes #
###############
# Each process consists of an in-out pair, where the "in" part refers to a DAS sample
# and the "out" refers to a real physical process in the final output histograms.
# For details, see the definition of the Process class in AnalysisSpecificationClasses.py

###
### MC processes
###

[ttH_hbb]
in: ttHTobb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttH_hbb

[ttH_nonhbb]
in: ttHToNonbb_M125_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttH_nonhbb

[ww]
in: WW_TuneCUETP8M1_13TeV-pythia8
out: diboson

[wz]
in: WZ_TuneCUETP8M1_13TeV-pythia8
out: diboson

[zz]
in: ZZ_TuneCUETP8M1_13TeV-pythia8
out: diboson

[ttw_wqq]
in: TTWJetsToQQ_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8
out: ttv

[ttw_wlnu]
in: TTWJetsToLNu_TuneCUETP8M1_13TeV-amcatnloFXFX-madspin-pythia8
out: ttv

[ttz_zqq]
in: TTZToQQ_TuneCUETP8M1_13TeV-amcatnlo-pythia8
out: ttv

[ttz_zllnunu]
in: TTZToQQ_TuneCUETP8M1_13TeV-amcatnlo-pythia8
out: ttv

[st_t]
in: ST_t-channel_top_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin
out: stop

[stbar_t]
in: ST_t-channel_antitop_4f_inclusiveDecays_TuneCUETP8M2T4_13TeV-powhegV2-madspin
out: stop

[st_s]
in: ST_s-channel_4f_leptonDecays_13TeV-amcatnlo-pythia8_TuneCUETP8M1
out: stop

[st_tw]
in: ST_tW_top_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4
out: stop

[stbar_tw]
in: ST_tW_antitop_5f_inclusiveDecays_13TeV-powheg-pythia8_TuneCUETP8M2T4
out: stop



#[dy_10_50]
#in: DYJetsToLL_M-10to50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8
#out: dy

#[dy_50_inf]
#in: DYJetsToLL_M-50_TuneCUETP8M1_13TeV-amcatnloFXFX-pythia8
#out: dy

#FIXME add other qcd samples
[qcd]
in: QCD_HT1000to1500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
out: qcd1000

[ttjets_powheg_ttbarOther]
in: TT_TuneCUETP8M2T4_13TeV-powheg-pythia8
out: ttbarOther
cuts: process_ttbarOther

[ttjets_powheg_ttbarPlusBBbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-pythia8
out: ttbarPlusBBbar
cuts: process_ttbarPlusBBbar

[ttjets_powheg_ttbarPlus2B]
in: TT_TuneCUETP8M2T4_13TeV-powheg-pythia8
out: ttbarPlus2B
cuts: process_ttbarPlus2B

[ttjets_powheg_ttbarPlusB]
in: TT_TuneCUETP8M2T4_13TeV-powheg-pythia8
out: ttbarPlusB
cuts: process_ttbarPlusB

[ttjets_powheg_ttbarPlusCCbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-pythia8
out: ttbarPlusCCbar
cuts: process_ttbarPlusCCbar

###
### ISR and FSR variated samples
### 

#ISR up
[ttjets_powheg_isr_up_ttbarOther]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8
out: ttbarOther
cuts: process_ttbarOther

[ttjets_powheg_isr_up_ttbarPlusBBbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8
out: ttbarPlusBBbar
cuts: process_ttbarPlusBBbar

[ttjets_powheg_isr_up_ttbarPlus2B]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8
out: ttbarPlus2B
cuts: process_ttbarPlus2B

[ttjets_powheg_isr_up_ttbarPlusB]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8
out: ttbarPlusB
cuts: process_ttbarPlusB

[ttjets_powheg_isr_up_ttbarPlusCCbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrup-pythia8
out: ttbarPlusCCbar
cuts: process_ttbarPlusCCbar

#ISR Down
[ttjets_powheg_isr_down_ttbarOther]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8
out: ttbarOther
cuts: process_ttbarOther

[ttjets_powheg_isr_down_ttbarPlusBBbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8
out: ttbarPlusBBbar
cuts: process_ttbarPlusBBbar

[ttjets_powheg_isr_down_ttbarPlus2B]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8
out: ttbarPlus2B
cuts: process_ttbarPlus2B

[ttjets_powheg_isr_down_ttbarPlusB]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8
out: ttbarPlusB
cuts: process_ttbarPlusB

[ttjets_powheg_isr_down_ttbarPlusCCbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-isrdown-pythia8
out: ttbarPlusCCbar
cuts: process_ttbarPlusCCbar

#FSR up
[ttjets_powheg_fsr_up_ttbarOther]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8
out: ttbarOther
cuts: process_ttbarOther

[ttjets_powheg_fsr_up_ttbarPlusBBbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8
out: ttbarPlusBBbar
cuts: process_ttbarPlusBBbar

[ttjets_powheg_fsr_up_ttbarPlus2B]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8
out: ttbarPlus2B
cuts: process_ttbarPlus2B

[ttjets_powheg_fsr_up_ttbarPlusB]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8
out: ttbarPlusB
cuts: process_ttbarPlusB

[ttjets_powheg_fsr_up_ttbarPlusCCbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrup-pythia8
out: ttbarPlusCCbar
cuts: process_ttbarPlusCCbar

#fsr Down
[ttjets_powheg_fsr_down_ttbarOther]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8
out: ttbarOther
cuts: process_ttbarOther

[ttjets_powheg_fsr_down_ttbarPlusBBbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8
out: ttbarPlusBBbar
cuts: process_ttbarPlusBBbar

[ttjets_powheg_fsr_down_ttbarPlus2B]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8
out: ttbarPlus2B
cuts: process_ttbarPlus2B

[ttjets_powheg_fsr_down_ttbarPlusB]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8
out: ttbarPlusB
cuts: process_ttbarPlusB

[ttjets_powheg_fsr_down_ttbarPlusCCbar]
in: TT_TuneCUETP8M2T4_13TeV-powheg-fsrdown-pythia8
out: ttbarPlusCCbar
cuts: process_ttbarPlusCCbar

###
### TT+jets samples split by top pair decay mode
###

#SL
[ttjets_sl_powheg_ttbarOther]
in: TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarOther
cuts: process_ttbarOther

[ttjets_sl_powheg_ttbarPlusBBbar]
in: TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlusBBbar
cuts: process_ttbarPlusBBbar

[ttjets_sl_powheg_ttbarPlus2B]
in: TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlus2B
cuts: process_ttbarPlus2B

[ttjets_sl_powheg_ttbarPlusB]
in: TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlusB
cuts: process_ttbarPlusB

[ttjets_sl_powheg_ttbarPlusCCbar]
in: TTToSemilepton_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlusCCbar
cuts: process_ttbarPlusCCbar

#DL
[ttjets_dl_powheg_ttbarOther]
in: TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarOther
cuts: process_ttbarOther

[ttjets_dl_powheg_ttbarPlusBBbar]
in: TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlusBBbar
cuts: process_ttbarPlusBBbar

[ttjets_dl_powheg_ttbarPlus2B]
in: TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlus2B
cuts: process_ttbarPlus2B

[ttjets_dl_powheg_ttbarPlusB]
in: TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlusB
cuts: process_ttbarPlusB

[ttjets_dl_powheg_ttbarPlusCCbar]
in: TTTo2L2Nu_TuneCUETP8M2_ttHtranche3_13TeV-powheg-pythia8
out: ttbarPlusCCbar
cuts: process_ttbarPlusCCbar

#[wjets_ht_100_200]
#in: WJetsToLNu_HT-100To200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#out: wjets
#
#[wjets_ht_200_400]
#in: WJetsToLNu_HT-200To400_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#out: wjets
#
#[wjets_ht_400_600]
#in: WJetsToLNu_HT-400To600_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#out: wjets
#
#[wjets_ht_600_800]
#in: WJetsToLNu_HT-600To800_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#out: wjets
#
#[wjets_ht_800_1200]
#in: WJetsToLNu_HT-800To1200_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#out: wjets
#
#[wjets_ht_1200_2500]
#in: WJetsToLNu_HT-1200To2500_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#out: wjets
#
#[wjets_ht_2500_inf]
#in: WJetsToLNu_HT-2500ToInf_TuneCUETP8M1_13TeV-madgraphMLM-pythia8
#out: wjets

###
### Data processes
###

[data_m]
in: SingleMuon
out: data
lumi: SingleMuon
cuts: triggerPath_m

[data_e]
in: SingleElectron
out: data
lumi: SingleElectron
cuts: triggerPath_e

[data_mm]
in: DoubleMuon
out: data
lumi: DoubleMuon
cuts: triggerPath_mm

[data_em]
in: MuonEG
out: data
lumi: MuonEG
cuts: triggerPath_em

[data_ee]
in: DoubleEG
out: data
lumi: DoubleEG
cuts: triggerPath_ee

[data_fh]
in: JetHT
out: data
lumi: JetHT
cuts: triggerPath_fh

[common_shape_uncertainties]
CMS_res_j: 1
#CMS_scale_j: 1
CMS_scaleAbsoluteStat_j: 1
CMS_scaleAbsoluteScale_j: 1
CMS_scaleAbsoluteFlavMap_j: 1
CMS_scaleAbsoluteMPFBias_j: 1
CMS_scaleFragmentation_j: 1
CMS_scaleSinglePionECAL_j: 1
CMS_scaleSinglePionHCAL_j: 1
CMS_scaleFlavorQCD_j: 1
CMS_scaleTimePtEta_j: 1
CMS_scaleRelativeJEREC1_j: 1
CMS_scaleRelativeJEREC2_j: 1
CMS_scaleRelativeJERHF_j: 1
CMS_scaleRelativePtBB_j: 1
CMS_scaleRelativePtEC1_j: 1
CMS_scaleRelativePtEC2_j: 1
CMS_scaleRelativePtHF_j: 1
CMS_scaleRelativeFSR_j: 1
CMS_scaleRelativeStatFSR_j: 1
CMS_scaleRelativeStatEC_j: 1
CMS_scaleRelativeStatHF_j: 1
CMS_scalePileUpDataMC_j: 1
CMS_scalePileUpPtRef_j: 1
CMS_scalePileUpPtBB_j: 1
CMS_scalePileUpPtEC1_j: 1
CMS_scalePileUpPtEC2_j: 1
CMS_scalePileUpPtHF_j: 1
CMS_ttH_CSVcferr1: 1
CMS_ttH_CSVcferr2: 1
CMS_ttH_CSVhf: 1
CMS_ttH_CSVhfstats1: 1
CMS_ttH_CSVhfstats2: 1
CMS_ttH_CSVjes: 1
CMS_ttH_CSVlf: 1
CMS_ttH_CSVlfstats1: 1
CMS_ttH_CSVlfstats2: 1
CMS_pu: 1
CMS_ttjetsfsr: 1
CMS_ttjetsisr: 1

[common_scale_uncertainties]
lumi: 1.045

[scale_uncertainties]
#ttH_hbb:
#  QCDscale_ttH 1.133
#  pdf_gg 1.083
ttbarPlus2B:
  bgnorm_ttbarPlus2B 1.5
  QCDscale_ttbar 1.030
  pdf_gg 1.026
ttbarPlusB:
  bgnorm_ttbarPlusB 1.5
  QCDscale_ttbar 1.030
  pdf_gg 1.026
ttbarPlusBBbar:
  bgnorm_ttbarPlusBBbar 1.5
  QCDscale_ttbar 1.030
  pdf_gg 1.026
ttbarPlusCCbar:
  bgnorm_ttbarPlusCCbar 1.5
  QCDscale_ttbar 1.030
  pdf_gg 1.026
ttbarOther:
  QCDscale_ttbar 1.030
  pdf_gg 1.026

[group_sl]
categories: 
  sl_j4_t3
  sl_j4_tge4
  sl_j5_t3
  sl_j5_tge4
  sl_jge6_t3
  sl_jge6_tge4

[group_sl_2tag]
categories: 
  sl_j4_t2
  sl_j4_t3
  sl_j4_tge4
  sl_j5_t2
  sl_j5_t3
  sl_j5_tge4
  sl_jge6_t2
  sl_jge6_t3
  sl_jge6_tge4

[group_dl]
categories: 
  dl_jge4_tge4
  dl_jge4_t3

[group_dl_2tag]
categories: 
  dl_jge4_tge4
  dl_jge4_t3
  dl_jge4_t2
#  dl_j3_t3
#  dl_j3_t2

[group_sldl]
categories: 
  sl_j4_t3
  sl_j4_tge4
  sl_j5_t3
  sl_j5_tge4
  sl_jge6_t3
  sl_jge6_tge4
  dl_jge4_tge4
  dl_jge4_t3

[group_sldl_2tag]
categories: 
  sl_j4_t2
  sl_j4_t3
  sl_j4_tge4
  sl_j5_t2
  sl_j5_t3
  sl_j5_tge4
  sl_jge6_t2
  sl_jge6_t3
  sl_jge6_tge4
  dl_jge4_tge4
  dl_jge4_t3
  dl_jge4_t2

[group_fh]
categories: 
  fh_j8_t4

[template_dl]
mc_processes:
  base_processes
  ttjets_powheg
#  ttjets_powheg_exclusive
#  ttjets_powheg_fsr_down
#  ttjets_powheg_fsr_up
#  ttjets_powheg_isr_down
#  ttjets_powheg_isr_up
data_processes: 
common_shape_uncertainties: common_shape_uncertainties
common_scale_uncertainties: common_scale_uncertainties
scale_uncertainties: scale_uncertainties
src_histogram: dl/sparse
signal_processes: ttH_hbb ttH_nonhbb

[template_sl]
mc_processes:
  base_processes
  ttjets_powheg
#  ttjets_powheg_exclusive
#  ttjets_powheg_fsr_down
#  ttjets_powheg_fsr_up
#  ttjets_powheg_isr_down
#  ttjets_powheg_isr_up
data_processes:
  sl_data
common_shape_uncertainties: common_shape_uncertainties
common_scale_uncertainties: common_scale_uncertainties
scale_uncertainties: scale_uncertainties
src_histogram: sl/sparse
signal_processes:
  ttH_hbb
  ttH_nonhbb

[template_fh]
mc_processes: base_processes ttjets_powheg
data_processes: fh_data
common_shape_uncertainties: common_shape_uncertainties
common_scale_uncertainties: common_scale_uncertainties
scale_uncertainties: scale_uncertainties
src_histogram: fh/sparse
signal_processes: ttH_hbb ttH_nonhbb

[sl_jge6_tge4]
template: template_sl
discriminator: mem_SL_2w2h2t_p mem_SL_2w2h2t_p 6,0,1
control_variables: 
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  leps_0_pt leps_0_pt 30,0,300
  Wmass Wmass 30,0,400
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 20,0,20
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 6 8
  nBCSVM 4 8

[sl_jge6_tge4_blrL]
template: template_sl
discriminator: common_mem common_mem 6,0,1
control_variables: 
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 6 8
  nBCSVM 4 8
  btag_LR_4b_2b_btagCSV_logit -5 6

[sl_jge6_tge4_blrH]
template: template_sl
discriminator: common_mem common_mem 6,0,1
control_variables: 
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 6 8
  nBCSVM 4 8
  btag_LR_4b_2b_btagCSV_logit 6 10

[sl_jge3]
template: template_sl
discriminator: leps_0_pt leps_0_pt 30,0,300
control_variables: 
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 3 8
   
[sl_jge6_t2]
template: template_sl
discriminator: jetsByPt_0_pt jetsByPt_0_pt 30,0,400
control_variables:
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-2,8
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
cuts:
  is_sl 1 2
  numJets 6 8
  nBCSVM 2 3

[sl_jge6_t3]
template: template_sl
discriminator: btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-2,8
control_variables: 
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  leps_0_pt leps_0_pt 30,0,300
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 6 100 
  nBCSVM 3 4

[sl_jge6_tge2]
template: template_sl
discriminator: leps_0_pt leps_0_pt 30,0,300
control_variables: 
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 6 8 
  nBCSVM 2 8

[sl_j5_tge4]
template: template_sl
discriminator: mem_SL_1w2h2t_p mem_SL_1w2h2t_p 6,0,1
control_variables: 
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
  common_bdt common_bdt 30,-1,1
  leps_0_pt leps_0_pt 30,0,300
cuts:
  is_sl 1 2
  numJets 5 6 
  nBCSVM 4 8

[sl_j5_t2]
template: template_sl
discriminator: jetsByPt_0_pt jetsByPt_0_pt 30,0,400
control_variables: 
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-2,8
# common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 5 6 
  nBCSVM 2 3

[sl_j5_t3]
template: template_sl
discriminator: btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-2,8
control_variables: 
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  leps_0_pt leps_0_pt 30,0,300
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 5 6 
  nBCSVM 3 4

[sl_j4_tge4]
template: template_sl
discriminator: mem_SL_0w2h2t_p mem_SL_0w2h2t_p 6,0,1
control_variables:
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
  leps_0_pt leps_0_pt 30,0,300
cuts: 
  is_sl 1 2
  numJets 4 5
  nBCSVM 4 8

[sl_j4_t3]
template: template_sl
discriminator: btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-2,8
control_variables:
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  leps_0_pt leps_0_pt 30,0,300
  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 4 5
  nBCSVM 3 4

[sl_j4_t2]
template: template_sl
discriminator: jetsByPt_0_pt jetsByPt_0_pt 30,0,400
control_variables: 
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-2,8
#  common_bdt common_bdt 30,-1,1
cuts:
  is_sl 1 2
  numJets 4 5
  nBCSVM 2 3

[dl_jge4_tge4]
template: template_dl
discriminator: mem_DL_0w2h2t_p mem_DL_0w2h2t_p 6,0,1
control_variables:
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
cuts:
  is_dl 1 2
  numJets 4 8
  nBCSVM 4 8

[dl_jge4_t3]
template: template_dl
discriminator: btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
control_variables:
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  jetsByPt_0_pt jetsByPt_0_pt 30,0,400
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
cuts:
  is_dl 1 2
  numJets 4 8
  nBCSVM 3 4

[dl_jge4_t2]
template: template_dl
discriminator: jetsByPt_0_pt jetsByPt_0_pt 30,0,400
control_variables:
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
cuts:
  is_dl 1 2
  numJets 4 8
  nBCSVM 2 3

[dl_j3_t3]
template: template_dl
discriminator: jetsByPt_0_pt jetsByPt_0_pt 30,0,400
control_variables:
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
cuts:
  is_dl 1 2
  numJets 3 4
  nBCSVM 3 4

[dl_j3_t2]
template: template_dl
discriminator: jetsByPt_0_pt jetsByPt_0_pt 30,0,400
control_variables:
  leps_0_pt leps_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
cuts:
  is_dl 1 2
  numJets 3 4
  nBCSVM 2 3

[fh_j8_t4]
template: template_fh
discriminator: jetsByPt_0_pt jetsByPt_0_pt 30,0,400
control_variables:
  jetsByPt_0_pt jetsByPt_0_pt 30,0,300
  jetsByPt_0_btagCSV jetsByPt_0_btagCSV 30,0,1
  btag_LR_4b_2b_btagCSV_logit btag_LR_4b_2b_btagCSV_logit 30,-10,10
cuts:
  is_fh 1 2
  numJets 8 9
  btag_LR_4b_2b_btagCSV 0.99 1.1
